With the server open in the background load up OllyDbg. Under file select the attach command, then select PCManFTP to attach to.
This will open the program in OllyDbg and the register values are in the top right. The top left / centre of the screen is the assembly instructions being executed by the program, the bottom left is the memory, while the bottom right is the stack. You should notice a yellow box with red text saying ‘Paused’ in the bottom right, so press F9 to run the program. Now run the fuzzer again and wait for the program to crash. Do not close the program once it crashes. Once the crash occurs you’ll notice OllyDbg pause once more and the register values will be frozen on the values they were at the time of the crash.
Looking closely we can see that the EIP register has the value of ‘41414141’. Seem familiar? This is the hex value of “A”, the string we were sending in our fuzzer. EIP has been over written with AAAA meaning the program went to try and execute memory address 0x41414141, because this isn’t valid it subsequently crashed. This is great news, it means we can control EIP! Because we need to precisely overwrite the 4 bytes in EIP it’s required for us to understand which 4 A’s out of the 2100 we sent did the overwriting. A tool called pattern create from Metasploit can help with this, it creates a unique string that when matched with it’s sister tool pattern_offset can identify which 4 bytes overwrite EIP.
